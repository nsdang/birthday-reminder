{"ast":null,"code":"import _toConsumableArray from \"/Users/anhnguyen/Desktop/GitHub/Projects/TimeMatcher/birthday-reminder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/anhnguyen/Desktop/GitHub/Projects/TimeMatcher/birthday-reminder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _createForOfIteratorHelper from \"/Users/anhnguyen/Desktop/GitHub/Projects/TimeMatcher/birthday-reminder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _slicedToArray from \"/Users/anhnguyen/Desktop/GitHub/Projects/TimeMatcher/birthday-reminder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anhnguyen/Desktop/GitHub/Projects/TimeMatcher/birthday-reminder/src/views/KanbanBoard/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport _ from 'lodash';\nimport uuid from 'uuid/v1';\nimport { makeStyles } from '@material-ui/styles';\nimport axios from 'src/utils/axios';\nimport Page from 'src/components/Page';\nimport Header from './Header';\nimport TaskList from './TaskList';\nimport TaskListItem from './TaskListItem';\nimport TaskDetails from './TaskDetails';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    container: {\n      flexGrow: 1,\n      padding: theme.spacing(0, 3, 3, 1),\n      overflowX: 'auto',\n      overflowY: 'hidden',\n      whiteSpace: 'nowrap'\n    }\n  };\n});\n\nfunction KanbanBoard() {\n  var _this = this;\n\n  var classes = useStyles();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      lists = _useState2[0],\n      setLists = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      openedTask = _useState4[0],\n      setOpenedTask = _useState4[1];\n\n  useEffect(function () {\n    var mounted = true;\n\n    var fetchData = function fetchData() {\n      axios.get('/api/kanban').then(function (response) {\n        if (mounted) {\n          var tempLists = []; // eslint-disable-next-line no-restricted-syntax\n\n          var _iterator = _createForOfIteratorHelper(response.data.lists),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var list = _step.value;\n              tempLists.push(_objectSpread({}, list, {\n                items: []\n              }));\n            } // eslint-disable-next-line no-restricted-syntax\n\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n\n          var _iterator2 = _createForOfIteratorHelper(response.data.tasks),\n              _step2;\n\n          try {\n            var _loop = function _loop() {\n              var task = _step2.value;\n              tempLists.forEach(function (list) {\n                if (list.id === task.list) {\n                  list.items.push(task);\n                }\n              });\n            };\n\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              _loop();\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n\n          setLists(tempLists);\n        }\n      });\n    };\n\n    fetchData();\n    return function () {\n      mounted = false;\n    };\n  }, []);\n\n  var handleDragEnd = function handleDragEnd(event) {\n    var source = event.source,\n        destination = event.destination;\n\n    if (!destination) {\n      return;\n    }\n\n    var newLists = _.clone(lists);\n\n    var sourceList = newLists.find(function (list) {\n      return list.id === source.droppableId;\n    });\n    var destinationList = newLists.find(function (list) {\n      return list.id === destination.droppableId;\n    });\n\n    var _sourceList$items$spl = sourceList.items.splice(source.index, 1),\n        _sourceList$items$spl2 = _slicedToArray(_sourceList$items$spl, 1),\n        removedItem = _sourceList$items$spl2[0];\n\n    if (source.droppableId === destination.droppableId) {\n      sourceList.items.splice(destination.index, 0, removedItem);\n      setLists(newLists);\n    } else {\n      removedItem.list = destination.droppableId;\n      destinationList.items.splice(destination.index, 0, removedItem);\n      setLists(newLists);\n    }\n  };\n\n  var handleListAdd = function handleListAdd() {\n    var list = {\n      id: uuid(),\n      title: 'New list',\n      items: []\n    };\n    setLists(function (prevLists) {\n      return [].concat(_toConsumableArray(prevLists), [list]);\n    });\n  };\n\n  var handleTaskOpen = function handleTaskOpen(task) {\n    setOpenedTask(task);\n  };\n\n  var handleTaskClose = function handleTaskClose() {\n    setOpenedTask(null);\n  };\n\n  return /*#__PURE__*/React.createElement(Page, {\n    className: classes.root,\n    title: \"Kanban Board\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    onListAdd: handleListAdd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DragDropContext, {\n    onDragEnd: handleDragEnd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, lists.map(function (list) {\n    return /*#__PURE__*/React.createElement(Droppable, {\n      droppableId: list.id,\n      key: list.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, function (provided, snapshot) {\n      return /*#__PURE__*/React.createElement(TaskList, {\n        provided: provided,\n        snapshot: snapshot,\n        title: list.title,\n        total: list.items.length,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }\n      }, list.items.map(function (task, index) {\n        return /*#__PURE__*/React.createElement(Draggable, {\n          draggableId: task.id,\n          index: index,\n          key: task.id,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 21\n          }\n        }, function (provided, snapshot) {\n          return /*#__PURE__*/React.createElement(TaskListItem, {\n            onOpen: function onOpen() {\n              return handleTaskOpen(task);\n            },\n            provided: provided,\n            snapshot: snapshot,\n            task: task,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 25\n            }\n          });\n        });\n      }), provided.placeholder);\n    });\n  }))), /*#__PURE__*/React.createElement(TaskDetails, {\n    onClose: handleTaskClose,\n    open: Boolean(openedTask),\n    task: openedTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default KanbanBoard;","map":{"version":3,"sources":["/Users/anhnguyen/Desktop/GitHub/Projects/TimeMatcher/birthday-reminder/src/views/KanbanBoard/index.js"],"names":["React","useState","useEffect","DragDropContext","Droppable","Draggable","_","uuid","makeStyles","axios","Page","Header","TaskList","TaskListItem","TaskDetails","useStyles","theme","root","height","display","flexDirection","container","flexGrow","padding","spacing","overflowX","overflowY","whiteSpace","KanbanBoard","classes","lists","setLists","openedTask","setOpenedTask","mounted","fetchData","get","then","response","tempLists","data","list","push","items","tasks","task","forEach","id","handleDragEnd","event","source","destination","newLists","clone","sourceList","find","droppableId","destinationList","splice","index","removedItem","handleListAdd","title","prevLists","handleTaskOpen","handleTaskClose","map","provided","snapshot","length","placeholder","Boolean"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport _ from 'lodash';\nimport uuid from 'uuid/v1';\nimport { makeStyles } from '@material-ui/styles';\nimport axios from 'src/utils/axios';\nimport Page from 'src/components/Page';\nimport Header from './Header';\nimport TaskList from './TaskList';\nimport TaskListItem from './TaskListItem';\nimport TaskDetails from './TaskDetails';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  container: {\n    flexGrow: 1,\n    padding: theme.spacing(0, 3, 3, 1),\n    overflowX: 'auto',\n    overflowY: 'hidden',\n    whiteSpace: 'nowrap'\n  }\n}));\n\nfunction KanbanBoard() {\n  const classes = useStyles();\n  const [lists, setLists] = useState([]);\n  const [openedTask, setOpenedTask] = useState(null);\n\n  useEffect(() => {\n    let mounted = true;\n\n    const fetchData = () => {\n      axios.get('/api/kanban').then((response) => {\n        if (mounted) {\n          const tempLists = [];\n\n          // eslint-disable-next-line no-restricted-syntax\n          for (const list of response.data.lists) {\n            tempLists.push({ ...list, items: [] });\n          }\n\n          // eslint-disable-next-line no-restricted-syntax\n          for (const task of response.data.tasks) {\n            tempLists.forEach((list) => {\n              if (list.id === task.list) {\n                list.items.push(task);\n              }\n            });\n          }\n\n          setLists(tempLists);\n        }\n      });\n    };\n\n    fetchData();\n\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  const handleDragEnd = (event) => {\n    const { source, destination } = event;\n\n    if (!destination) {\n      return;\n    }\n\n    const newLists = _.clone(lists);\n    const sourceList = newLists.find((list) => list.id === source.droppableId);\n    const destinationList = newLists.find(\n      (list) => list.id === destination.droppableId\n    );\n    const [removedItem] = sourceList.items.splice(source.index, 1);\n\n    if (source.droppableId === destination.droppableId) {\n      sourceList.items.splice(destination.index, 0, removedItem);\n      setLists(newLists);\n    } else {\n      removedItem.list = destination.droppableId;\n      destinationList.items.splice(destination.index, 0, removedItem);\n      setLists(newLists);\n    }\n  };\n\n  const handleListAdd = () => {\n    const list = {\n      id: uuid(),\n      title: 'New list',\n      items: []\n    };\n\n    setLists((prevLists) => [...prevLists, list]);\n  };\n\n  const handleTaskOpen = (task) => {\n    setOpenedTask(task);\n  };\n\n  const handleTaskClose = () => {\n    setOpenedTask(null);\n  };\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"Kanban Board\"\n    >\n      <Header onListAdd={handleListAdd} />\n      <div className={classes.container}>\n        <DragDropContext onDragEnd={handleDragEnd}>\n          {lists.map((list) => (\n            <Droppable\n              droppableId={list.id}\n              key={list.id}\n            >\n              {(provided, snapshot) => (\n                <TaskList\n                  provided={provided}\n                  snapshot={snapshot}\n                  title={list.title}\n                  total={list.items.length}\n                >\n                  {list.items.map((task, index) => (\n                    <Draggable\n                      draggableId={task.id}\n                      index={index}\n                      key={task.id}\n                    >\n                      {(provided, snapshot) => (\n                        <TaskListItem\n                          onOpen={() => handleTaskOpen(task)}\n                          provided={provided}\n                          snapshot={snapshot}\n                          task={task}\n                        />\n                      )}\n                    </Draggable>\n                  ))}\n                  {provided.placeholder}\n                </TaskList>\n              )}\n            </Droppable>\n          ))}\n        </DragDropContext>\n      </div>\n      <TaskDetails\n        onClose={handleTaskClose}\n        open={Boolean(openedTask)}\n        task={openedTask}\n      />\n    </Page>\n  );\n}\n\nexport default KanbanBoard;\n"]},"metadata":{},"sourceType":"module"}