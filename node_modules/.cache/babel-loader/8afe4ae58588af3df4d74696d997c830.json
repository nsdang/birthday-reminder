{"ast":null,"code":"import _defineProperty from \"/Users/dnguyen/Desktop/Projects/birthday-reminder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/dnguyen/Desktop/Projects/birthday-reminder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/dnguyen/Desktop/Projects/birthday-reminder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/dnguyen/Desktop/Projects/birthday-reminder/src/views/Register/RegisterForm.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport validate from \"validate.js\";\nimport clsx from \"clsx\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Button, Checkbox, FormHelperText, TextField, Typography, Link } from \"@material-ui/core\";\nimport firebaseConfig from \"../../firebase-config.js\";\nimport firebase from \"firebase\";\nvar schema = {\n  firstName: {\n    presence: {\n      allowEmpty: false,\n      message: \"is required\"\n    },\n    length: {\n      maximum: 32\n    }\n  },\n  lastName: {\n    presence: {\n      allowEmpty: false,\n      message: \"is required\"\n    },\n    length: {\n      maximum: 32\n    }\n  },\n  email: {\n    presence: {\n      allowEmpty: false,\n      message: \"is required\"\n    },\n    email: true,\n    length: {\n      maximum: 64\n    }\n  },\n  password: {\n    presence: {\n      allowEmpty: false,\n      message: \"is required\"\n    },\n    length: {\n      maximum: 128\n    }\n  },\n  policy: {\n    presence: {\n      allowEmpty: false,\n      message: \"is required\"\n    },\n    checked: true\n  }\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    fields: {\n      margin: theme.spacing(-1),\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      \"& > *\": {\n        flexGrow: 1,\n        margin: theme.spacing(1)\n      }\n    },\n    policy: {\n      display: \"flex\",\n      alignItems: \"center\"\n    },\n    policyCheckbox: {\n      marginLeft: \"-14px\"\n    },\n    submitButton: {\n      marginTop: theme.spacing(2),\n      width: \"100%\"\n    }\n  };\n});\n\nfunction RegisterForm(_ref) {\n  var className = _ref.className,\n      rest = _objectWithoutProperties(_ref, [\"className\"]);\n\n  var classes = useStyles();\n  var history = useHistory();\n\n  var _useState = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {}\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      formState = _useState2[0],\n      setFormState = _useState2[1];\n\n  var handleChange = function handleChange(event) {\n    event.persist();\n    setFormState(function (prevFormState) {\n      return _objectSpread({}, prevFormState, {\n        values: _objectSpread({}, prevFormState.values, _defineProperty({}, event.target.name, event.target.type === \"checkbox\" ? event.target.checked : event.target.value)),\n        touched: _objectSpread({}, prevFormState.touched, _defineProperty({}, event.target.name, true))\n      });\n    });\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    history.push(\"/auth/login\");\n\n    if (!firebase.apps.length) {\n      firebase.initializeApp(firebaseConfig);\n    }\n\n    var db = firebase.firestore();\n    db.settings({\n      timestampsInSnapshots: true\n    });\n    db.collection(\"users\").add({\n      firstname: formState.values.firstName,\n      lastname: formState.values.lastName,\n      email: formState.values.email,\n      password: formState.values.password,\n      friends: []\n    });\n  };\n\n  var hasError = function hasError(field) {\n    return !!(formState.touched[field] && formState.errors[field]);\n  };\n\n  useEffect(function () {\n    var errors = validate(formState.values, schema);\n    setFormState(function (prevFormState) {\n      return _objectSpread({}, prevFormState, {\n        isValid: !errors,\n        errors: errors || {}\n      });\n    });\n  }, [formState.values]);\n  return React.createElement(\"form\", Object.assign({}, rest, {\n    className: clsx(classes.root, className),\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classes.fields,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    error: hasError(\"firstName\"),\n    helperText: hasError(\"firstName\") ? formState.errors.firstName[0] : null,\n    label: \"First name\",\n    name: \"firstName\",\n    onChange: handleChange,\n    value: formState.values.firstName || \"\",\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    error: hasError(\"lastName\"),\n    helperText: hasError(\"lastName\") ? formState.errors.lastName[0] : null,\n    label: \"Last name\",\n    name: \"lastName\",\n    onChange: handleChange,\n    value: formState.values.lastName || \"\",\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    error: hasError(\"email\"),\n    fullWidth: true,\n    helperText: hasError(\"email\") ? formState.errors.email[0] : null,\n    label: \"Email address\",\n    name: \"email\",\n    onChange: handleChange,\n    value: formState.values.email || \"\",\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    error: hasError(\"password\"),\n    fullWidth: true,\n    helperText: hasError(\"password\") ? formState.errors.password[0] : null,\n    label: \"Password\",\n    name: \"password\",\n    onChange: handleChange,\n    type: \"password\",\n    value: formState.values.password || \"\",\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.policy,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(Checkbox, {\n    checked: formState.values.policy || false,\n    className: classes.policyCheckbox,\n    color: \"primary\",\n    name: \"policy\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }), React.createElement(Typography, {\n    color: \"textSecondary\",\n    variant: \"body1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, \"I have read the\", \" \", React.createElement(Link, {\n    color: \"secondary\",\n    component: RouterLink,\n    to: \"#\",\n    underline: \"always\",\n    variant: \"h6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, \"Terms and Conditions\"))), hasError(\"policy\") && React.createElement(FormHelperText, {\n    error: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, formState.errors.policy[0]))), React.createElement(Button, {\n    className: classes.submitButton,\n    color: \"secondary\",\n    disabled: !formState.isValid,\n    size: \"large\",\n    type: \"submit\",\n    variant: \"contained\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, \"Create account\"));\n}\n\nRegisterForm.propTypes = {\n  className: PropTypes.string\n};\nexport default RegisterForm;","map":{"version":3,"sources":["/Users/dnguyen/Desktop/Projects/birthday-reminder/src/views/Register/RegisterForm.js"],"names":["React","useState","useEffect","useHistory","Link","RouterLink","validate","clsx","PropTypes","makeStyles","Button","Checkbox","FormHelperText","TextField","Typography","firebaseConfig","firebase","schema","firstName","presence","allowEmpty","message","length","maximum","lastName","email","password","policy","checked","useStyles","theme","root","fields","margin","spacing","display","flexWrap","flexGrow","alignItems","policyCheckbox","marginLeft","submitButton","marginTop","width","RegisterForm","className","rest","classes","history","isValid","values","touched","errors","formState","setFormState","handleChange","event","persist","prevFormState","target","name","type","value","handleSubmit","preventDefault","push","apps","initializeApp","db","firestore","settings","timestampsInSnapshots","collection","add","firstname","lastname","friends","hasError","field","propTypes","string"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport validate from \"validate.js\";\nimport clsx from \"clsx\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Button,\n  Checkbox,\n  FormHelperText,\n  TextField,\n  Typography,\n  Link,\n} from \"@material-ui/core\";\nimport firebaseConfig from \"../../firebase-config.js\";\nimport firebase from \"firebase\";\n\nconst schema = {\n  firstName: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    length: {\n      maximum: 32,\n    },\n  },\n  lastName: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    length: {\n      maximum: 32,\n    },\n  },\n  email: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    email: true,\n    length: {\n      maximum: 64,\n    },\n  },\n  password: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    length: {\n      maximum: 128,\n    },\n  },\n  policy: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    checked: true,\n  },\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  fields: {\n    margin: theme.spacing(-1),\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    \"& > *\": {\n      flexGrow: 1,\n      margin: theme.spacing(1),\n    },\n  },\n  policy: {\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n  policyCheckbox: {\n    marginLeft: \"-14px\",\n  },\n  submitButton: {\n    marginTop: theme.spacing(2),\n    width: \"100%\",\n  },\n}));\n\nfunction RegisterForm({ className, ...rest }) {\n  const classes = useStyles();\n  const history = useHistory();\n  const [formState, setFormState] = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {},\n  });\n\n  const handleChange = (event) => {\n    event.persist();\n\n    setFormState((prevFormState) => ({\n      ...prevFormState,\n      values: {\n        ...prevFormState.values,\n        [event.target.name]:\n          event.target.type === \"checkbox\"\n            ? event.target.checked\n            : event.target.value,\n      },\n      touched: {\n        ...prevFormState.touched,\n        [event.target.name]: true,\n      },\n    }));\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    history.push(\"/auth/login\");\n\n    if (!firebase.apps.length) {\n      firebase.initializeApp(firebaseConfig);\n    }\n    const db = firebase.firestore();\n    db.settings({\n      timestampsInSnapshots: true,\n    });\n\n    db.collection(\"users\").add({\n      firstname: formState.values.firstName,\n      lastname: formState.values.lastName,\n      email: formState.values.email,\n      password: formState.values.password,\n      friends: [],\n    });\n  };\n\n  const hasError = (field) =>\n    !!(formState.touched[field] && formState.errors[field]);\n\n  useEffect(() => {\n    const errors = validate(formState.values, schema);\n\n    setFormState((prevFormState) => ({\n      ...prevFormState,\n      isValid: !errors,\n      errors: errors || {},\n    }));\n  }, [formState.values]);\n\n  return (\n    <form\n      {...rest}\n      className={clsx(classes.root, className)}\n      onSubmit={handleSubmit}\n    >\n      <div className={classes.fields}>\n        <TextField\n          error={hasError(\"firstName\")}\n          helperText={\n            hasError(\"firstName\") ? formState.errors.firstName[0] : null\n          }\n          label=\"First name\"\n          name=\"firstName\"\n          onChange={handleChange}\n          value={formState.values.firstName || \"\"}\n          variant=\"outlined\"\n        />\n        <TextField\n          error={hasError(\"lastName\")}\n          helperText={\n            hasError(\"lastName\") ? formState.errors.lastName[0] : null\n          }\n          label=\"Last name\"\n          name=\"lastName\"\n          onChange={handleChange}\n          value={formState.values.lastName || \"\"}\n          variant=\"outlined\"\n        />\n        <TextField\n          error={hasError(\"email\")}\n          fullWidth\n          helperText={hasError(\"email\") ? formState.errors.email[0] : null}\n          label=\"Email address\"\n          name=\"email\"\n          onChange={handleChange}\n          value={formState.values.email || \"\"}\n          variant=\"outlined\"\n        />\n        <TextField\n          error={hasError(\"password\")}\n          fullWidth\n          helperText={\n            hasError(\"password\") ? formState.errors.password[0] : null\n          }\n          label=\"Password\"\n          name=\"password\"\n          onChange={handleChange}\n          type=\"password\"\n          value={formState.values.password || \"\"}\n          variant=\"outlined\"\n        />\n        <div>\n          <div className={classes.policy}>\n            <Checkbox\n              checked={formState.values.policy || false}\n              className={classes.policyCheckbox}\n              color=\"primary\"\n              name=\"policy\"\n              onChange={handleChange}\n            />\n            <Typography color=\"textSecondary\" variant=\"body1\">\n              I have read the{\" \"}\n              <Link\n                color=\"secondary\"\n                component={RouterLink}\n                to=\"#\"\n                underline=\"always\"\n                variant=\"h6\"\n              >\n                Terms and Conditions\n              </Link>\n            </Typography>\n          </div>\n          {hasError(\"policy\") && (\n            <FormHelperText error>{formState.errors.policy[0]}</FormHelperText>\n          )}\n        </div>\n      </div>\n      <Button\n        className={classes.submitButton}\n        color=\"secondary\"\n        disabled={!formState.isValid}\n        size=\"large\"\n        type=\"submit\"\n        variant=\"contained\"\n      >\n        Create account\n      </Button>\n    </form>\n  );\n}\n\nRegisterForm.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default RegisterForm;\n"]},"metadata":{},"sourceType":"module"}